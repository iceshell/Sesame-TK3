# Sesame-TK é¡¹ç›®æ€»ç»“æ–‡æ¡£

**é¡¹ç›®åç§°**: Sesame-TK (èŠéº»ç²’)  
**ç‰ˆæœ¬**: v0.3.0-rc146  
**æœ€åæ›´æ–°**: 2024-11-02  
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

---

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

Sesame-TK æ˜¯ä¸€ä¸ªåŸºäº Xposed/LSPosed æ¡†æ¶çš„æ”¯ä»˜å®èš‚èšæ£®æ—/èš‚èšåº„å›­è‡ªåŠ¨åŒ–å·¥å…·ã€‚é€šè¿‡ Hook æ”¯ä»˜å®åº”ç”¨ï¼Œå®ç°è‡ªåŠ¨æ”¶é›†èƒ½é‡ã€å–‚é¸¡ã€åšä»»åŠ¡ç­‰åŠŸèƒ½ã€‚

### æ ¸å¿ƒåŠŸèƒ½
- ğŸŒ² **èš‚èšæ£®æ—**: è‡ªåŠ¨æ”¶é›†èƒ½é‡ã€æµ‡æ°´ã€åˆç§
- ğŸ” **èš‚èšåº„å›­**: è‡ªåŠ¨å–‚é¸¡ã€ç­”é¢˜ã€åšä»»åŠ¡
- ğŸƒ **è¿åŠ¨**: è‡ªåŠ¨ç­¾åˆ°ã€å®Œæˆè¿åŠ¨ä»»åŠ¡
- ğŸ¾ **ç¥å¥‡ç‰©ç§**: è‡ªåŠ¨å–‚é£Ÿã€é¢†å–å¥–åŠ±
- âš™ï¸ **çµæ´»é…ç½®**: å¯è‡ªå®šä¹‰ä»»åŠ¡æ‰§è¡Œæ—¶é—´å’Œè§„åˆ™

---

## ğŸ¯ é¡¹ç›®é‡Œç¨‹ç¢‘

### å·²å®Œæˆ
âœ… **Java â†’ Kotlin è¿ç§»** (100%)
- æ‰€æœ‰æºä»£ç å·²è¿ç§»åˆ° Kotlin
- ä»£ç é‡å‡å°‘çº¦ 30%
- ç±»å‹å®‰å…¨å’Œç©ºå®‰å…¨

âœ… **ä»£ç è´¨é‡æå‡**
- æ¶ˆé™¤æ‰€æœ‰åºŸå¼ƒ API ä½¿ç”¨
- Null å®‰å…¨æ£€æŸ¥å®Œå–„
- åç¨‹åŒ–å¼‚æ­¥å¤„ç†

âœ… **æ„å»ºç³»ç»Ÿä¼˜åŒ–**
- Gradle 9.1.0
- Kotlin 2.2.20
- AGP 8.13.0
- é…ç½®ç¼“å­˜å’Œå¹¶è¡Œç¼–è¯‘

âœ… **æ—¥å¿—å¼‚å¸¸ä¿®å¤**
- ä¿®å¤ JSONException
- ä¼˜åŒ–é”™è¯¯å¤„ç†
- å®Œå–„æ—¥å¿—è®°å½•

### è¿›è¡Œä¸­
ğŸ”„ **æ€§èƒ½ä¼˜åŒ–** (è¯¦è§ PERFORMANCE_OPTIMIZATION_PLAN.md)
- Phase 1: RPC è°ƒç”¨ä¼˜åŒ–
- Phase 2: åç¨‹è§„èŒƒåŒ–
- Phase 3-5: å†…å­˜ã€UIã€ä»£ç è´¨é‡ä¼˜åŒ–

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- **Android**: 8.0+ (API 26+)
- **æ”¯ä»˜å®**: æœ€æ–°ç‰ˆæœ¬
- **Root æˆ– LSPatch**: éœ€è¦ Xposed æ¡†æ¶æ”¯æŒ
- **å¼€å‘å·¥å…·**: Android Studio 2024.1.4.8+

### å®‰è£…æ­¥éª¤

#### æ–¹æ³•1: ä½¿ç”¨ LSPosed (æ¨è)
1. å®‰è£… [LSPosed](https://github.com/LSPosed/LSPosed)
2. ä¸‹è½½å¹¶å®‰è£… Sesame-TK APK
3. åœ¨ LSPosed ä¸­å¯ç”¨æ¨¡å—å¹¶å‹¾é€‰æ”¯ä»˜å®
4. é‡å¯æ”¯ä»˜å®åº”ç”¨

#### æ–¹æ³•2: ä½¿ç”¨ LSPatch (å… Root)
1. ä¸‹è½½ [LSPatch](https://github.com/LSPosed/LSPatch)
2. ä½¿ç”¨ LSPatch ä¿®è¡¥æ”¯ä»˜å®å’Œ Sesame-TK
3. å®‰è£…ä¿®è¡¥åçš„åº”ç”¨

### é¦–æ¬¡é…ç½®
1. æ‰“å¼€æ”¯ä»˜å®ï¼Œåœ¨é€šçŸ¥æ æŸ¥çœ‹ Sesame-TK é€šçŸ¥
2. ç‚¹å‡»é€šçŸ¥è¿›å…¥é…ç½®ç•Œé¢
3. æ ¹æ®éœ€æ±‚é…ç½®å„é¡¹åŠŸèƒ½
4. ä¿å­˜é…ç½®ï¼Œç­‰å¾…å®šæ—¶ä»»åŠ¡æ‰§è¡Œ

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ
- **è¯­è¨€**: Kotlin 2.2.20
- **æ„å»º**: Gradle 9.1.0 + AGP 8.13.0
- **æ¡†æ¶**: 
  - Xposed API 82
  - LSPosed API 93
- **UI**: Android Material 3
- **å¼‚æ­¥**: Kotlin Coroutines
- **JSON**: org.json + Gson
- **ä»£ç è´¨é‡**: ktlint + detekt

### æ ¸å¿ƒç»„ä»¶

#### 1. Hook ç³»ç»Ÿ
```
hook/
â”œâ”€â”€ ApplicationHook.kt         # ä¸»å…¥å£ï¼ŒHook åº”ç”¨
â”œâ”€â”€ RequestManager.kt          # RPC è¯·æ±‚ç®¡ç†
â””â”€â”€ rpc/
    â”œâ”€â”€ bridge/
    â”‚   â””â”€â”€ RpcBridge.kt      # RPC æ¡¥æ¥å±‚
    â””â”€â”€ interval/
        â””â”€â”€ RpcIntervalLimit.kt  # è¯·æ±‚é¢‘ç‡é™åˆ¶
```

#### 2. ä»»åŠ¡ç³»ç»Ÿ
```
task/
â”œâ”€â”€ antForest/                 # èš‚èšæ£®æ—ä»»åŠ¡
â”œâ”€â”€ antFarm/                   # èš‚èšåº„å›­ä»»åŠ¡
â”œâ”€â”€ antSports/                 # è¿åŠ¨ä»»åŠ¡
â”œâ”€â”€ antDodo/                   # ç¥å¥‡ç‰©ç§ä»»åŠ¡
â””â”€â”€ ModelTask.kt              # ä»»åŠ¡åŸºç±»
```

#### 3. UI ç³»ç»Ÿ
```
ui/
â”œâ”€â”€ MainActivity.kt            # ä¸»ç•Œé¢
â”œâ”€â”€ StringDialog.kt            # é€šç”¨å¯¹è¯æ¡†
â””â”€â”€ widget/                    # è‡ªå®šä¹‰ç»„ä»¶
```

#### 4. å·¥å…·ç±»
```
util/
â”œâ”€â”€ Log.kt                     # æ—¥å¿—å·¥å…·
â”œâ”€â”€ Status.kt                  # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ NetworkUtils.kt            # ç½‘ç»œå·¥å…·
â”œâ”€â”€ ResChecker.kt              # å“åº”æ£€æŸ¥
â””â”€â”€ CoroutineUtils.kt          # åç¨‹å·¥å…·
```

---

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

### ä»£ç è§„æ¨¡
- **Kotlin æ–‡ä»¶**: 180+
- **ä»£ç è¡Œæ•°**: çº¦ 20,000 è¡Œ
- **åŒ…æ•°é‡**: 15+
- **ç±»æ•°é‡**: 200+

### æ„å»ºä¿¡æ¯
- **ç¼–è¯‘æ—¶é—´**: ~3 åˆ†é’Ÿ (release)
- **APK å¤§å°**: ~2.5 MB (release)
- **æœ€ä½ SDK**: 26 (Android 8.0)
- **ç›®æ ‡ SDK**: 34 (Android 14)

---

## ğŸ› å·²çŸ¥é—®é¢˜å’Œé™åˆ¶

### æ”¯ä»˜å®é™åˆ¶
1. **é£æ§æ£€æµ‹**: é¢‘ç¹æ“ä½œå¯èƒ½è§¦å‘éªŒè¯ç 
2. **ç‰ˆæœ¬å…¼å®¹**: æ–°ç‰ˆæ”¯ä»˜å®å¯èƒ½éœ€è¦é€‚é…
3. **åŠŸèƒ½é™åˆ¶**: éƒ¨åˆ†åŠŸèƒ½éœ€è¦æ‰‹åŠ¨è§¦å‘

### æŠ€æœ¯é™åˆ¶
1. **éœ€è¦ Root æˆ– LSPatch**: Xposed æ¡†æ¶è¦æ±‚
2. **å†…å­˜å ç”¨**: é•¿æ—¶é—´è¿è¡Œä¼šå ç”¨ä¸€å®šå†…å­˜
3. **ç”µæ± æ¶ˆè€—**: åå°ä»»åŠ¡ä¼šæ¶ˆè€—ç”µé‡

### è§£å†³æ–¹æ¡ˆ
- å®šæœŸé‡å¯æ”¯ä»˜å®é‡Šæ”¾å†…å­˜
- åˆç†é…ç½®ä»»åŠ¡æ‰§è¡Œé¢‘ç‡
- ä½¿ç”¨ç™½åå•é¿å…è¢«çœç”µæœºåˆ¶æ€åå°

---

## ğŸ”§ å¼€å‘æŒ‡å—

### å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/iceshell/Sesame-TK2.git
cd Sesame-TK2
```

### å¯¼å…¥ Android Studio
1. æ‰“å¼€ Android Studio
2. File -> Open -> é€‰æ‹©é¡¹ç›®ç›®å½•
3. ç­‰å¾… Gradle åŒæ­¥å®Œæˆ

### ç¼–è¯‘ Debug ç‰ˆ
```bash
./gradlew assembleDebug
```

### ç¼–è¯‘ Release ç‰ˆ
```bash
./gradlew assembleRelease
```

### ä»£ç æ£€æŸ¥
```bash
./gradlew ktlintCheck
./gradlew detekt
```

### è¿è¡Œæµ‹è¯•
```bash
./gradlew test
```

---

## ğŸ“ é…ç½®æ–‡ä»¶è¯´æ˜

### gradle.properties
Gradle æ„å»ºé…ç½®ï¼ŒåŒ…æ‹¬ JVM å†…å­˜ã€ç¼“å­˜ç­‰è®¾ç½®

### app/build.gradle.kts
åº”ç”¨æ„å»ºé…ç½®ï¼ŒåŒ…æ‹¬ä¾èµ–ã€ç¼–è¯‘é€‰é¡¹ã€æ··æ·†è§„åˆ™ç­‰

### proguard-rules.pro
ä»£ç æ··æ·†è§„åˆ™ï¼Œä¿æŠ¤æºç å’Œå‡å°ä½“ç§¯

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æŠ¥å‘Š Bug
1. åœ¨ Issues ä¸­æœç´¢æ˜¯å¦å·²å­˜åœ¨ç›¸åŒé—®é¢˜
2. æä¾›è¯¦ç»†çš„å¤ç°æ­¥éª¤å’Œç¯å¢ƒä¿¡æ¯
3. é™„ä¸Šæ—¥å¿—æ–‡ä»¶ï¼ˆlog ç›®å½•ï¼‰

### æäº¤ä»£ç 
1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/xxx`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add xxx'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/xxx`)
5. æäº¤ Pull Request

### ä»£ç è§„èŒƒ
- éµå¾ª Kotlin ç¼–ç è§„èŒƒ
- ä½¿ç”¨ ktlint æ ¼å¼åŒ–ä»£ç 
- æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ç¼–å†™å•å…ƒæµ‹è¯•

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä¸å¾—ç”¨äºå•†ä¸šç”¨é€”ã€‚

---

## ğŸ”— ç›¸å…³é“¾æ¥

- **GitHub**: https://github.com/iceshell/Sesame-TK2
- **LSPosed**: https://github.com/LSPosed/LSPosed
- **LSPatch**: https://github.com/LSPosed/LSPatch
- **æ”¯ä»˜å® SDK**: https://opendocs.alipay.com/

---

## ğŸ“® è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ GitHub Issues è”ç³»ã€‚

---

**æœ€åæ›´æ–°**: 2024-11-02  
**ç»´æŠ¤çŠ¶æ€**: ğŸŸ¢ ç§¯æç»´æŠ¤
